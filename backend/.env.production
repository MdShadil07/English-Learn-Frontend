# =================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# =================================

# Server Configuration
PORT=5000
NODE_ENV=production

# =================================
# DATABASE CONFIGURATION
# =================================
# MongoDB Atlas (Recommended for production)
MONGODB_URI="mongodb+srv://EnglishLearn:QJbhIm6M4c0dQpQ4@cluster0.krccfns.mongodb.net/EnglishLearn?retryWrites=true&w=majority&appName=Cluster0"

# Local MongoDB (Development/Testing)
# MONGODB_URI="mongodb://localhost:27017/english-practice"

# Database Connection Pool Settings
DB_MAX_POOL_SIZE=20
DB_MIN_POOL_SIZE=5
DB_MAX_IDLE_TIME_MS=30000
DB_SERVER_SELECTION_TIMEOUT_MS=5000
DB_SOCKET_TIMEOUT_MS=45000

# =================================
# REDIS CONFIGURATION (for production caching)
# =================================
# Redis Cloud (Recommended for production)
# REDIS_URL="redis://username:password@host:port"

# Local Redis (Development)
REDIS_URL="redis://localhost:6379"
REDIS_TTL=3600

# =================================
# AUTHENTICATION & SECURITY
# =================================
JWT_SECRET="english-learning-app-super-secret-key-2025-production"
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_SECRET="english-learning-app-super-secret-refresh-token-key-2025-production"
REFRESH_TOKEN_EXPIRES_IN=30d

# Password Configuration
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8

# Rate Limiting (Production values)
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX=100           # 100 requests per window
RATE_LIMIT_AUTH_MAX=5        # 5 auth attempts per 15 minutes
RATE_LIMIT_UPLOAD_MAX=50     # 50 uploads per hour

# =================================
# CLOUD STORAGE CONFIGURATION
# =================================
# Supabase (Current setup)
SUPABASE_URL=https://nsqmmieqjnngyzcwseqn.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5zcW1taWVxam5uZ3l6Y3dzZXFuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTE0NjYzMCwiZXhwIjoyMDc2NzIyNjMwfQ.a2EEMv1GMqHqYmr0ET9SvSArCSDi_vWR7j6KKz5Lpc8
SUPABASE_BUCKET=uploads

# Alternative: AWS S3 (For future migration)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-east-1
# S3_BUCKET=english-practice-uploads

# Alternative: Cloudflare R2 (Recommended for CDN)
# R2_ACCESS_KEY_ID=your-r2-access-key
# R2_SECRET_ACCESS_KEY=your-r2-secret-key
# R2_ACCOUNT_ID=your-account-id
# R2_BUCKET=english-practice-uploads

# =================================
# AI CONFIGURATION
# =================================
GEMINI_API_KEY=AIzaSyC0LeHomrSHfx2mDI5qy4jOV6fbTB9zTrM
GEMINI_MODEL=gemini-2.5-flash
GEMINI_MAX_TOKENS=4096
GEMINI_TEMPERATURE=0.3

# =================================
# MONITORING & LOGGING
# =================================
LOG_LEVEL=info
LOG_FORMAT=json

# Sentry DSN (Optional - for error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Application monitoring
ENABLE_METRICS=true
ENABLE_HEALTH_CHECKS=true

# =================================
# CLUSTERING & SCALING
# =================================
# PM2 Configuration
PM2_INSTANCES=max
PM2_MAX_MEMORY=1G
PM2_RESTART_DELAY=4000

# Nginx Configuration
NGINX_CLIENT_MAX_BODY_SIZE=20M
NGINX_RATE_LIMIT=100r/s
NGINX_GZIP_LEVEL=6

# =================================
# CORS & FRONTEND CONFIGURATION
# =================================
CLIENT_URL=https://your-production-domain.com
FRONTEND_URL=https://your-production-domain.com
ALLOWED_ORIGINS=https://your-production-domain.com,https://www.your-production-domain.com

# =================================
# SSL & SECURITY
# =================================
SSL_CERT_PATH=/etc/ssl/certs/your-certificate.crt
SSL_KEY_PATH=/etc/ssl/private/your-private.key

# Cloudflare (for DDoS protection and CDN)
# CLOUDFLARE_ZONE_ID=your-zone-id
# CLOUDFLARE_API_TOKEN=your-api-token

# =================================
# BACKUP & MAINTENANCE
# =================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Database maintenance
DB_MAINTENANCE_WINDOW="0 3 * * 0"  # Weekly on Sunday at 3 AM
DB_INDEX_REBUILD_ENABLED=true

# =================================
# PERFORMANCE OPTIMIZATION
# =================================
CACHE_TTL_PROFILES=300     # 5 minutes
CACHE_TTL_SEARCH=120       # 2 minutes
CACHE_TTL_STATS=600        # 10 minutes
CACHE_TTL_SESSIONS=3600    # 1 hour

# Compression settings
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Connection limits
MAX_CONNECTIONS_PER_IP=10
MAX_UPLOAD_SIZE=20MB

# =================================
# EMAIL & NOTIFICATIONS
# =================================
# Email service (for future features)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# Push notifications (for future mobile app)
# FCM_SERVER_KEY=your-fcm-server-key

# =================================
# FEATURE FLAGS
# =================================
ENABLE_WEBSOCKETS=true
ENABLE_REAL_TIME_UPDATES=true
ENABLE_ADVANCED_ANALYTICS=false  # Enable in Phase 2
ENABLE_MULTI_TENANCY=false       # Enable in Phase 3

# =================================
# REGIONAL SETTINGS
# =================================
DEFAULT_TIMEZONE=UTC
SUPPORTED_LANGUAGES=en,es,fr,de,it,pt
DEFAULT_CURRENCY=USD

# =================================
# DEVELOPMENT OVERRIDES
# =================================
# Uncomment for development
# NODE_ENV=development
# REDIS_URL=redis://localhost:6379
# LOG_LEVEL=debug
# ENABLE_METRICS=false
